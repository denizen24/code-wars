# **Составной индекс (или мультиколоночный индекс)**

— это тип индекса в реляционных базах данных, который создается на нескольких столбцах (колонках) таблицы. Составные индексы позволяют оптимизировать запросы, которые используют несколько столбцов для фильтрации, сортировки или объединения данных.

### Основные характеристики составных индексов:

1. Оптимизация запросов: Составные индексы помогают ускорить выполнение запросов, которые используют условия на нескольких столбцах. Например, если у вас есть запрос, который фильтрует данные по двум или более столбцам, составной индекс может значительно сократить время поиска.

2. Порядок столбцов: Порядок, в котором столбцы указаны в составном индексе, имеет значение. Индекс будет наиболее эффективным для запросов, которые фильтруют по первому столбцу, затем по второму и так далее. Если запрос использует только второй или третий столбец, эффективность индекса может снизиться.

3. Пример создания составного индекса: В PostgreSQL вы можете создать составной индекс следующим образом:
   ```jql
    CREATE INDEX idx_example ON my_table (column1, column2);
    ```

   В этом примере индекс создается на column1 и column2 таблицы my_table.

4. Использование в запросах: Составные индексы особенно полезны для запросов с условиями WHERE, ORDER BY и JOIN, которые используют несколько столбцов. Например:
    ```jql   
    SELECT * FROM my_table WHERE column1 = 'value1' AND column2 = 'value2';
    ```

5. Составные индексы и производительность: Хотя составные индексы могут значительно улучшить производительность запросов, они также могут замедлить операции вставки, обновления и удаления, так как индекс нужно обновлять при каждом изменении данных.

6. Комбинирование с одиночными индексами: Вы можете комбинировать составные индексы с одиночными индексами. Например, если у вас есть составной индекс на (column1, column2), вы все равно можете создать отдельный индекс на column3, если это необходимо для других запросов.

### Пример использования составного индекса

Предположим, у вас есть таблица employees с колонками first_name, last_name и department. Вы можете создать составной индекс для оптимизации запросов, которые фильтруют по имени и фамилии:

`CREATE INDEX idx_employee_name ON employees (first_name, last_name);
`

Теперь, если вы выполните запрос, который ищет сотрудников по имени и фамилии:

`SELECT * FROM employees WHERE first_name = 'John' AND last_name = 'Doe';
`

Составной индекс idx_employee_name поможет ускорить выполнение этого запроса.

### Заключение

Составные индексы являются мощным инструментом для оптимизации производительности запросов в реляционных базах данных. Они позволяют эффективно обрабатывать запросы, использующие несколько столбцов, но требуют тщательного проектирования, чтобы обеспечить максимальную эффективность. Если у вас есть дополнительные вопросы или нужна помощь с конкретными аспектами, дайте знать!