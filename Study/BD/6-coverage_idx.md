# Покрывающий индекс (или полный индекс, coverage index)

— это тип индекса в реляционных базах данных, который содержит все необходимые данные для выполнения определенного запроса, что позволяет избежать обращения к основной таблице для извлечения данных. Это означает, что все столбцы, которые используются в запросе, включены в индекс.

### Основные характеристики покрывающего индекса:

1. Полное покрытие запроса: Покрывающий индекс позволяет базе данных выполнить запрос, используя только индекс, без необходимости обращаться к строкам таблицы. Это значительно ускоряет выполнение запросов, особенно при работе с большими объемами данных.

2. Улучшение производительности: Использование покрывающих индексов может значительно снизить время выполнения запросов, так как они позволяют избежать дополнительных операций ввода-вывода, связанных с чтением данных из таблицы.

3. Создание индекса: При создании покрывающего индекса необходимо указать все столбцы, которые будут использоваться в запросе. Например, если у вас есть таблица employees и вы часто выполняете запросы, извлекающие name и salary, вы можете создать покрывающий индекс следующим образом:
   `CREATE INDEX idx_employees_name_salary ON employees (name, salary);`


4. Использование в запросах: Когда запрос выполняется, если все необходимые столбцы присутствуют в индексе, СУБД может использовать покрывающий индекс для получения результатов, не обращаясь к основной таблице.

   Пример:
   `SELECT name, salary FROM employees WHERE department = 'Sales';`


5. Преимущества и недостатки:
    - Преимущества: Ускорение выполнения запросов, снижение нагрузки на систему ввода-вывода.
    - Недостатки: Покрывающие индексы занимают больше места на диске и могут замедлить операции вставки и обновления, так как необходимо обновлять индекс при изменении данных.

### Пример использования покрывающего индекса

Предположим, у вас есть таблица products, и вы часто выполняете запросы на получение product_name и price для определенной категории:

CREATE INDEX idx_products_name_price ON products (product_name, price);


Теперь, когда вы выполняете следующий запрос:

`SELECT product_name, price FROM products WHERE category = 'Electronics';
`

Если индекс охватывает все запрашиваемые столбцы, PostgreSQL может использовать этот индекс для получения результатов, не обращаясь к основной таблице, что значительно ускоряет выполнение запроса.

### Заключение

Покрывающие индексы — это мощный инструмент для оптимизации производительности запросов в реляционных базах данных, позволяя избежать дополнительных обращений к таблицам и ускоряя выполнение операций. Правильное использование покрывающих индексов может значительно улучшить общую производительность базы данных. Если у вас есть дополнительные вопросы или нужна помощь с конкретными аспектами, дайте знать!